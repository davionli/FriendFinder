<!doctype html>
<html lang="en">
  <head>
    <title>survey</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
        <div class="container border-bottom">
            <div class="header border-bottom">
                <h1>Survey Questions</h1>
                <br>
            </div>
            <form id="answer">
                <div class="info border-bottom">
                    <h2>About You</h2>
                    <div>
                        <label for="name"><strong>Name (Required)</strong></label>
                        <input class="form-control" id="name" type="text">
                    </div>
                    <div>
                        <label for="photo"><strong>Link to Photo Image (Required)</strong></label>
                        <input class="form-control" id="photo" type="text">    
                    </div>
                    <br>
                </div>
                <div class="question" id="question1">
                    <h2>Question 1</h2>
                    <p><strong>Your mind is always buzzing with unexplored ideas and plans.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question1" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question1" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question1" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question1" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question1" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div class="question" id="question2">
                    <h2>Question 2</h2>
                    <p><strong>Generally speaking, you rely more on your experience than your imagination.
                        </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question2" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question2" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question2" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question2" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question2" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div class="question" id="question3">
                    <h2>Question 3</h2>
                    <p><strong>You find it easy to stay relaxed and focused even when there is some pressure.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question3" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question3" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question3" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question3" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question3" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                </br>
            </br>
                </div>
                <div class="question" id="question4">
                    <h2>Question 4</h2>
                    <p><strong>You rarely do something just out of sheer curiosity.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question4" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question4" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question4" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question4" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question4" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div class="question" id="question5">
                    <h2>Question 5</h2>
                    <p><strong>People can rarely upset you.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question5" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question5" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question5" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question5" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question5" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div class="question" id="question6">
                    <h2>Question 6</h2>
                    <p><strong>It is often difficult for you to relate to other people’s feelings.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question6" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question6" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question6" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question6" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question6" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div class="question" id="question7">
                    <h2>Question 7</h2>
                    <p><strong>In a discussion, truth should be more important than people’s sensitivities.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question7" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question7" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question7" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question7" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question7" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div class="question" id="question8">
                    <h2>Question 8</h2>
                    <p><strong>You rarely get carried away by fantasies and ideas.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question8" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question8" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question8" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question8" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question8" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div class="question" id="question9">
                    <h2>Question 9</h2>
                    <p><strong>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question9" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question9" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question9" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question9" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question9" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div class="question" id="question1">
                    <h2>Question 10</h2>
                    <p><strong>You feel more energetic after spending time with a group of people.
                    </strong></p>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">(Strongly Disagree)</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question10" value="1">
                        <label class="form-check-label">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question10" value="2">
                        <label class="form-check-label">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question10" value="3">
                        <label class="form-check-label">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="question10" value="4">
                        <label class="form-check-label">4</label>
                    </div>
                    <div class="form-check form-check-inline">

                        <input class="form-check-input" type="radio" name="question10" value="5">
                        <label class="form-check-label">5 (Strongly Agree)</label>
                    </div>
                    </br>
                    </br>
                </div>
                <div>
                    <br>
                    <button type="submit" id="submit" class="btn btn-primary btn-block">Submit</button>
                </div>
                <br>
            </form>
        </div>
        <footer>
            <div class="container">
                <p>
                    <a href="/api/friends">API Friends List</a>
                     | 
                    <a href="https://github.com/davionli/FriendFinder">GitHub Repo</a>
                </p>
            </div>
        </footer>

        <div class="modal fade" id="matchedModal" tabindex="-1" role="dialog" aria-labelledby="matchedModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="matchedModalLabel">Best Match For You</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h2 id="matchedName">Name</h2>
                        <img src="#" id="matchedPhoto" width="300">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
              

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script type="text/JavaScript">
        $("#submit").on("click", function(event) {
            event.preventDefault();

            var personName = $("#name").val().trim();
            var personUrl = $("#photo").val().trim();
            var personAnswers = [];
            for (var i=1; i<=10; i++) {
                var option = $(`[name^='question${i}']`);
                for (var j=0; j<5; j++)
                    if (option[j].checked) {
                        personAnswers.push(option[j].defaultValue);
                    }
            }
            if (!personName || !personUrl || personAnswers.length !== 10)
                alert("Please fill out all fields before submitting!");
            else {
                var newPerson = {
                    name: personName,
                    url: personUrl,
                    answers: personAnswers
                }
                post(newPerson);
            }

            function post(personData) {
                $.post("/api/friends", personData,
                function(element) {
                    $.ajax({ url: "/api/friends", method: "GET" }).then(function(data) {
                        var min = 100;
                        var index = 0;

                        for (var i=0; i<data.length-1; i++) {
                            var sum = calcMatch(personData, data[i]);
                            if (min > sum) {
                                min = sum;
                                index = i;
                            }
                        }
                        $("#matchedName").text(data[index].name);
                        $("#matchedPhoto").attr("src", data[index].url);
                        $("#matchedModal").modal("show");
                    });
                });
            }
            function calcMatch(x, y) {
                var sum = 0;
                for (var i=0; i<10; i++)
                    sum += Math.abs(parseInt(x.answers[i]) - parseInt(y.answers[i]));
                return sum;
            }
        });
    </script>
  </body>
</html>